<!-- Resources externes -->
<div x-show="push_type == 'external_resource'"
     x-transition:enter-start="grow-enter-start"
     x-transition:leave="grow-leave">
    <div class="fr-search-bar fr-search-bar--lg" id="search-2" role="search">
        <label class="fr-label" for="external-resource-url-input">
            Url du site :
            <span class="fr-hint-text">Saisissez une url valide, commençant par https://</span>
        </label>
        <input class="fr-input"
               type="text"
               placeholder="https://"
               id="external-resource-url-input"
               x-ref="external_resource_url"
               name="external-resource-url-input">
        <button class="fr-btn"
                @click.prevent="postExternalResource($refs.external_resource_url.value)">Charger la ressource</button>
    </div>
    <div x-show="isBusy"
         x-transition
         class="position-absolute text-center w-100">
        <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
    <ul x-show="externalResource.length > 0"
        class="cards d-flex row row-cols-3 g-4 fr-pl-0 fr-ml-0 fr-mt-1v">
        <template x-for="resource in externalResource" :key="resource.id">
            <li class="col-4">{% include "projects/project/fragments/action_pusher/resource_short_element.html" %}</li>
        </template>
    </ul>
</div>
<!-- Resources internes -->
<div id="resource-list"
     class="push-reco__ressources fr-mb-3w grow"
     x-show="push_type == 'single'"
     x-transition:enter-start="grow-enter-start"
     x-transition:leave="grow-leave">
    <h3 class="push-reco__title-section fr-mb-3v">Recherche d'une ressource existante sur {{ request.site.name }}</h3>
    <div class="ressources__search-bar">
        <span class="fr-icon-search-line fr-icon--sm" aria-hidden="true"></span>
        <input data-test-id="search-resource-input"
               class="fr-input w-100"
               type="search"
               x-on:input.debounce="searchResources()"
               x-model="search"
               placeholder="Rechercher une ressource...">
    </div>
    {% for error in form.resource.errors %}<div class="text-danger text-start fr-mb-2v">{{ error }}</div>{% endfor %}
    <!-- listing -->
    <p class="search-counter fs-6 fr-mb-0"
       x-show="!search"
       x-text="`${db.documentCount} ressources au total`"></p>
    <p class="search-counter fs-6 fr-mb-0"
       x-show="search"
       x-text="`${results.length} ressource(s) trouvée(s)`"></p>
    <ul x-show="results.length > 0"
        class="cards d-flex row row-cols-3 g-4 fr-pl-0 fr-ml-0 fr-mt-1v">
        <template x-for="resource in results" :key="resource.id">
            <li class="col-4 fr-mt-1w">{% include "projects/project/fragments/action_pusher/resource_short_element.html" %}</li>
        </template>
    </ul>
    <div x-show="results.length <= 0 && search != ''"
         class="fr-p-2w w-100 text-center rounded bg-light">
        <span class="fw-bolder">Aucune ressource correspondante</span>
        <div x-show="suggestions.length">
            Vous cherchez peut être :
            <template x-for="suggestion in suggestions">
                <a href="#"
                   @click.prevent="search = suggestion.suggestion; searchResources();"
                   x-text="suggestion.suggestion"></a>&nbsp;
            </template>
        </div>
    </div>
</div>

{% extends "base.html" %}

{% block content %}
	<h2 class="display-3">Accompagnement de projet</h2>

<a href="{% url 'projects-project-list' %}" class="btn btn-outline-secondary btn-sm">
retour liste des projets
</a>

<section>

	<h3 class="display-4">Contexte</h3>

	<table class="table table-bordered">
		<tr>
			<th>Nom</th>
			<td>{{ project.name }}</td>
		</tr>
		<tr>
			<th>Localisation</th>
			<td>{{ project.location }}</td>
		</tr>
		<tr>
			<th>Date de création</th>
			<td>{{ project.created_on }}</td>
		</tr>
	</table>

</section>

<section>

	<h3 class="display-4">Demande initiale</h3>

	<table class="table table-bordered">
		<tr>
			<th>Description</th>
			<td>{{ project.description|linebreaks }}</td>
		</tr>
		<tr>
			<th>Attentes</th>
			<td>{{ project.impediments|linebreaks }}</td>
		</tr>
	</table>

</section>

<section>

	<h3 class="display-4">Actions</h3>

	{% if not project.tasks.count %}
	<p>
	Aucune action actuellement pour ce projet. C'est le bon moment pour
	<a href="{% url 'projects-create-task' project.id %}">
		créer une première action.
	</a>
	</p>
	{% else %}
	<p>
	<a href="{% url 'projects-create-task' project.id %}" class="btn btn-primary btn-sm">
		ajouter une action
	</a>
	</p>

	<table class="table">
		<thead>
			<tr>
				<th>Échéance</th>
				<th>Description</th>
				<th>Complétée</th>
			</tr>
		</thead>
		<tbody>
			{% for task in project.tasks %}
			<tr>
				<td>{{ task.deadline|default:"" }}</td>
				<td>{{ task.content|linebreaks }}</td>
				<td>{% if task.done %}oui{% endif %}</td>
			</tr>
			{% endfor %}
			</tr>
		</tbody>
	</table>
	{% endif %}

</section>

<section>

	<h3 class="display-4">Notes de suivi</h3>

	{% if not project.notes.count %}

	<p>
	Aucune note actuellement pour ce projet. C'est le bon moment pour
	<a href="{% url 'projects-create-note' project.id %}">
		créer une première note.
	</a>
	</p>
	{% else %}
	<p>
	<a href="{% url 'projects-create-note' project.id %}" class="btn btn-primary btn-sm">
		ajouter une note
	</a>
	</p>

	{% for note in project.notes %}
	<div class="card" style="margin:1em;padding:1em">
		<p>{{ note.content|linebreaks }}</p>
		<p>Tags: {{ note.tags }}</p>
		<p>Rédigée le {{ note.created_on }}</p>
	</div>
	{% endfor %}
	{% endif %}

</section>

{% endblock %}

